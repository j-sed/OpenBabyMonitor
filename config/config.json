{
    "database": {
        "root_account": {
            "host": "localhost",
            "user": "root",
            "password": "root"
        },
        "account": {
            "host": "localhost",
            "user": "babymonitor",
            "password": ""
        },
        "name": "babymonitor",
        "key": {
            "type": "TINYINT UNSIGNED PRIMARY KEY",
            "value": 0
        }
    },
    "modes": {
        "current": {
            "type": "TINYINT UNSIGNED NOT NULL",
            "initial_value": 0,
            "values": {
                "standby": {
                    "value": 0,
                    "start_command": "sudo systemctl start bm_standby",
                    "stop_command": null,
                    "restart_command": null,
                    "wait_for_file": null
                },
                "listen": {
                    "value": 1,
                    "start_command": "sudo systemctl start bm_listen",
                    "stop_command": "sudo systemctl stop bm_listen",
                    "restart_command": "sudo systemctl restart bm_listen",
                    "wait_for_file": null
                },
                "audiostream": {
                    "value": 2,
                    "start_command": "sudo systemctl start bm_audiostream",
                    "stop_command": "sudo systemctl stop bm_audiostream",
                    "restart_command": "sudo systemctl restart bm_audiostream",
                    "wait_for_file": null
                },
                "videostream": {
                    "value": 3,
                    "start_command": "sudo systemctl start bm_videostream",
                    "stop_command": "sudo systemctl stop bm_videostream",
                    "restart_command": "sudo systemctl restart bm_videostream",
                    "wait_for_file": "BM_PICAM_STREAM_FILE"
                }
            }
        }
    },
    "control": {
        "mode_query_interval": 1e-2,
        "mode_switch_timeout": 15.0,
        "server_actions": {
            "commands": {
                "activate_ap_mode": "echo activate_ap_mode > $BM_SERVER_ACTION_FILE",
                "activate_client_mode": "echo activate_client_mode > $BM_SERVER_ACTION_FILE",
                "reboot": "echo reboot > $BM_SERVER_ACTION_FILE",
                "shutdown": "echo shutdown > $BM_SERVER_ACTION_FILE",
                "set_timestamp": "echo \"set_timestamp $TIMESTAMP\" > $BM_SERVER_ACTION_FILE",
                "scan_wireless_networks": "echo scan_wireless_networks > $BM_SERVER_ACTION_FILE"
            }
        },
        "lock_commands": {
            "acquire": "rm -f $BM_MODE_LOCK_FILE",
            "release": "touch $BM_MODE_LOCK_FILE"
        }
    },
    "network": {
        "network_query_interval": 1e-1,
        "network_switch_timeout": 300.0,
        "connected_network_ssid_script_filename": "get_connected_network_ssid.sh",
        "wireless_modes": {
            "access_point": "Master",
            "client": "Managed"
        }
    },
    "known_networks": {
        "ssid": {
            "type": "VARCHAR(64) PRIMARY KEY"
        },
        "psk": {
            "type": "CHAR(64)"
        }
    },
    "videostream_settings": {
        "vertical_resolution": {
            "group": "quality",
            "name": "Vertikal oppløsning",
            "type": "INT UNSIGNED NOT NULL",
            "initial_value": 720,
            "values": {
                "480p": 480,
                "720p": 720,
                "1080p": 1080
            }
        },
        "use_variable_framerate": {
            "group": "video",
            "name": "Variabel bildefrekvens",
            "type": "BOOLEAN NOT NULL",
            "initial_value": true
        },
        "framerate": {
            "group": "video",
            "name": "Bildefrekvens (Hz)",
            "type": "INT UNSIGNED NOT NULL",
            "initial_value": 25,
            "range": {
                "min": 1,
                "max": 35,
                "step": 1
            },
            "disabled_when": {
                "use_variable_framerate": {
                    "operator": "==",
                    "value": "1"
                }
            }
        },
        "rotation": {
            "group": "orientation",
            "name": "Rotasjon",
            "type": "INT UNSIGNED NOT NULL",
            "initial_value": 0,
            "values": {
                "0°": 0,
                "90°": 90,
                "180°": 180,
                "270°": 270
            }
        },
        "flip_horizontally": {
            "group": "orientation",
            "name": "Flipp horisontalt",
            "type": "BOOLEAN NOT NULL",
            "initial_value": false
        },
        "flip_vertically": {
            "group": "orientation",
            "name": "Flipp vertikalt",
            "type": "BOOLEAN NOT NULL",
            "initial_value": false
        },
        "metering": {
            "group": "brightness",
            "name": "Lysmåling",
            "type": "VARCHAR(7) NOT NULL",
            "initial_value": "average",
            "values": {
                "Gjennomsnitt": "average",
                "Punkt": "spot",
                "Matrise": "matrix",
                "Bakbelyst": "backlit"
            }
        },
        "exposure_mode": {
            "group": "brightness",
            "name": "Eksponeringsmodus",
            "type": "VARCHAR(12) NOT NULL",
            "initial_value": "auto",
            "values": {
                "Auto": "auto",
                "Manuell": "off",
                "Natt": "night",
                "Natt (rask)": "nightpreview",
                "Bakbelyst": "backlight",
                "Strobelys": "spotlight",
                "Sport": "sports",
                "Snø": "snow",
                "Strand": "beach",
                "Veldig lang": "verylong",
                "Fast frekvens": "fixedfps",
                "Antivibrasjon": "antishake",
                "Fyrverkeri": "fireworks",
                "Stor lysåpning": "largeaperture",
                "Liten lysåpning": "smallaperture"
            },
            "disabled_when": {
                "use_variable_framerate": {
                    "operator": "==",
                    "value": "0"
                }
            }
        },
        "exposure_value_compensation": {
            "group": "brightness",
            "name": "Eksponeringskompensasjon",
            "type": "INT NOT NULL",
            "initial_value": 0,
            "range": {
                "min": -24,
                "max": 24,
                "step": 0.2
            },
            "disabled_when": {
                "exposure_mode": {
                    "operator": "!=",
                    "value": "off"
                },
                "use_variable_framerate": {
                    "operator": "==",
                    "value": "0"
                }
            }
        },
        "exposure_time": {
            "group": "brightness",
            "name": "Eksponeringstid (ms)",
            "type": "INT UNSIGNED",
            "initial_value": 200,
            "range": {
                "min": 2,
                "max": 2000,
                "step": 2
            },
            "disabled_when": {
                "exposure_mode": {
                    "operator": "!=",
                    "value": "off"
                },
                "use_variable_framerate": {
                    "operator": "==",
                    "value": "0"
                }
            }
        },
        "iso": {
            "group": "brightness",
            "name": "ISO",
            "type": "INT UNSIGNED",
            "initial_value": 800,
            "range": {
                "min": 100,
                "max": 800,
                "step": 10
            },
            "disabled_when": {
                "exposure_mode": {
                    "operator": "!=",
                    "value": "off"
                },
                "use_variable_framerate": {
                    "operator": "==",
                    "value": "0"
                }
            }
        },
        "white_balance_mode": {
            "group": "color",
            "name": "Hvitbalansemodus",
            "type": "VARCHAR(12) NOT NULL",
            "initial_value": "greyworld",
            "values": {
                "Auto": "auto",
                "Manuell": "off",
                "Dagslys": "sun",
                "Overskyet": "cloudy",
                "Skygge": "shade",
                "Kunstlys": "tungsten",
                "Lysstoffrør": "fluorescent",
                "Glødepære": "incandescent",
                "Blits": "flash",
                "Horisont": "horizon",
                "Gråskala": "greyworld"
            }
        },
        "red_gain": {
            "group": "color",
            "name": "Rødt",
            "type": "FLOAT",
            "initial_value": 1.0,
            "range": {
                "min": 0.0,
                "max": 8.0,
                "step": 0.1
            },
            "disabled_when": {
                "white_balance_mode": {
                    "operator": "!=",
                    "value": "off"
                }
            }
        },
        "blue_gain": {
            "group": "color",
            "name": "Blått",
            "type": "FLOAT",
            "initial_value": 1.5,
            "range": {
                "min": 0.0,
                "max": 8.0,
                "step": 0.1
            },
            "disabled_when": {
                "white_balance_mode": {
                    "operator": "!=",
                    "value": "off"
                }
            }
        },
        "capture_audio": {
            "group": "Inkluder lyd",
            "name": "capture_audio",
            "type": "BOOLEAN NOT NULL",
            "initial_value": true
        },
        "volume": {
            "group": "audio",
            "name": "Volum",
            "type": "FLOAT NOT NULL",
            "initial_value": 2.0,
            "range": {
                "min": 0.1,
                "max": 10.0,
                "step": 0.1
            }
        },
        "show_time": {
            "group": "info",
            "name": "Vis tidspunkt",
            "type": "BOOLEAN NOT NULL",
            "initial_value": true
        }
    },
    "videostream_groups": {
        "quality": "Kvalitet",
        "video": "Video",
        "orientation": "Orientering",
        "brightness": "Lysstyrke",
        "color": "Farge",
        "audio": "Lyd",
        "info": "Info"
    }
}
